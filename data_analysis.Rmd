---
title: "lab_11"
author: "sean mussenden"
date: "8/26/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#Libraries
```{r}
library(tidyverse)
```

#Seperate out data for D.C. and save to new csv file
```{r}
state_may_2010 <- read_csv("data/state_csv/state_may_2010.csv")
dc_2010 <- state_may_2010 %>% filter(ST == "DC")

for (year in 10:18){
  inputFilename <- str_c("data/state_csv/state_may_20", toString(year), ".csv")
  outputFilename <- str_c("data/dc_may_20", toString(year), ".csv")
  all_states <- read.csv(inputFilename)
  all_states <- all_states %>% 
    filter(AREA == 11) %>%
    rename(AREA_NAME = STATE) %>% 
    write_csv(outputFilename)
}

#Column format changes in 2019
for (year in 19:21){
  inputFilename <- str_c("data/state_csv/state_may_20", toString(year), ".csv")
  outputFilename <- str_c("data/dc_may_20", toString(year), ".csv")
  all_states <- read.csv(inputFilename)
  names(all_states) <- toupper(names(all_states))
  all_states <- all_states %>% 
    filter(AREA == 11) %>%
    rename(AREA_NAME = AREA_TITLE) %>% 
    write_csv(outputFilename)
}
```

#Seperate out San Francisco and Seattle
```{r}
state_may_2010 <- read_csv("data/state_csv/state_may_2010.csv")
dc_2010 <- state_may_2010 %>% filter(ST == "DC")

for (year in 10:18){
  inputFilename <- str_c("data/metro_areas_csv/metro_may_20", toString(year),".csv")
  outputFilename <- str_c("data/SF/sf_may_20", toString(year), ".csv")
  
  all_areas <- read.csv(inputFilename)
  all_areas %>% 
    filter(AREA == 41884) %>%
    write_csv(outputFilename)
  
  outputFilename <- str_c("data/SEA/sea_may_20", toString(year), ".csv")
  all_areas %>% 
    filter(AREA == 42644) %>%
    write_csv(outputFilename)
}

for (year in 19:21){
  for(i in 1:3){
  inputFilename <- str_c("data/metro_areas_csv/metro_may_20", toString(year), ".csv")
  all_areas <- read.csv(inputFilename)
  names(all_areas) <- toupper(names(all_areas))
  
  outputFilename <- str_c("data/SF/sf_may_20", toString(year), ".csv")
  all_areas %>% 
    filter(AREA == 41884) %>%
    rename(AREA_NAME = AREA_TITLE) %>% 
    write_csv(outputFilename)
  
  outputFilename <- str_c("data/SEA/sea_may_20", toString(year), ".csv")
  all_areas %>% 
    filter(AREA == 42644) %>%
    rename(AREA_NAME = AREA_TITLE) %>% 
    write_csv(outputFilename)
  }
}
```

```{r}
dc_2010 <- read_csv("data/DC/dc_may_2011.csv")
```
